<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="bower_components/google-map/google-map.html">

<dom-module id="x-map">
  <template>
    <style>
    google-map {
      width: 100%;
      height: 100vh;
      height: -webkit-calc(100vh - 64px);
      height: calc(100vh - 64px);
    }
    </style>

    <iron-ajax
      auto
      url="data/shops.json"
      last-response="{{shops}}"
    ></iron-ajax>

    <google-map disable-default-ui single-info-window
      gesture-handling="greedy"
      latitude="41.7741117" longitude="140.7209939" zoom="14" min-zoom="14">

      <template is="dom-repeat" items="[[shops]]">
        <google-map-marker slot="markers" latitude="[[item.position.lat]]" longitude="[[item.position.lng]]">
          <p><b>[[item.shopname]]</b></p>
          <small>[[item.description]]</small>
        </google-map-marker>
      </template>

    </google-map>
  </template>

  <script>
  class XMap extends Polymer.Element {
    static get is() {return 'x-map';}
  }
  customElements.define(XMap.is, XMap)
  </script>
</dom-module>
